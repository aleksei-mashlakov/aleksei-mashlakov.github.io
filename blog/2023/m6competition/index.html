<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Never Have I Ever ... Won M6 competition? | Aleksei Mashlakov</title> <meta name="author" content="Aleksei Mashlakov"> <meta name="description" content="My naïve year-long journey to the M6 competition"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/mstile-70x70.png"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://aleksei-mashlakov.github.io/blog/2023/m6competition/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> </head> <body> <d-front-matter> <script async type="text/json">{
      "title": "Never Have I Ever ... Won M6 competition?",
      "description": "My naïve year-long journey to the M6 competition",
      "published": "February 20, 2023",
      "authors": [
        {
          "author": "Aleksei Mashlakov",
          "authorURL": "https://aleksei-mashlakov.github.io/",
          "affiliations": [
            {
              "name": "-",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Aleksei </span>Mashlakov</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">news</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Never Have I Ever ... Won M6 competition?</h1> <p>My naïve year-long journey to the M6 competition</p> </d-title> <d-byline></d-byline> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> <div><a href="#"></a></div> </nav> </d-contents> <div class="row justify-content-sm-center"> <div class="col-sm-6 mt-2 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/m6_competition/m6competition-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/m6_competition/m6competition-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/m6_competition/m6competition-1400.webp"></source> <img src="/assets/img/m6_competition/m6competition.jpg" class="img-fluid rounded z-depth-1" width="700" height="200" title="Trading chart as green and red waves. Generated by DALLE-II" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Trading chart as green and red waves. Generated by DALLE-II </div> <h1 id="introduction">Introduction</h1> <h2 id="m-series-competition">M-series competition</h2> <p><strong>M-series competition</strong> <d-footnote> M comes from the surname of the organizer, Spyros Makridakis</d-footnote> dates back to 1982, when the first M competition was held. The competition was designed to test the forecasting skills of the participants and provide world wide benchmarking of the forecasting models. Since then, in total five competitions were completed focusing into different application domain (retail, micro, industry, finance, etc.), time frames (from hourly to yearly), and types of forecasting problems (point, probabilistic, multivariate forecasting and so on). This long history made the M-series competition somewhat legendary in the forecasting community<d-footnote>The datasets of the previous competitions are available on the [here](https://forecasters.org/resources/time-series-data/)</d-footnote>.</p> <h2 id="m6-competition">M6 Competition</h2> <p><strong>The M6 competition</strong> is a live financial forecasting competition that started in February 2022, and ended a year later in 2023. The competition followed <code class="language-plaintext highlighter-rouge">duathlon</code> approach consisting of forecasting and investment tracks. For each track, the participants needed to submit (i) forecasts and (ii) investment decisions at each successive monthly submission point. The submission included forecasts and your investment strategy over the next four week period (normally 20 trading days). The competition data consisted from a universe of 50 S&amp;P500 stocks and 50 ETFs, covering a variety of asset categories.</p> <p>The forecasting performance for a particular submission point was measured by the <strong>Ranked Probability Score (RPS)</strong>. The score evaluated the skills of the forecasting models to predict the ranking, from 1 (worst performing) to 5 (best performing), of realised percentage total returns of all assets (stocks and ETFs) over the forecasting period. The performance of the investment decisions was measured by means of a variant of the <strong>Information Ratio (IR)</strong>, defined as the ratio of the portfolio return, <em>ret</em>, to the standard deviation of the portfolio return, <em>sdp</em>. Namely, risk adjusted returns are defined as \(IR = {ret}/{sdp}\). More details on the rules of the competition are available in <a href="https://mofc.unic.ac.cy/wp-content/uploads/2022/02/M6-Guidelines-1.pdf" rel="external nofollow noopener" target="_blank">guidlines</a>.</p> <p>My journey in the M6 competition started in January 2022, when I first heard about the competition. I considered the competition as a good sandbox to test my forecasting and optimization skills and hopefully build on it further learning from the best in the field. The beginning of the competition coincided with my moving process from a PhD life to an industry job in Belgium. Thanks to Belgian bureaucracy, I had some time in the beginning of the competition to experiment but later in time I felt into more straightforward <code class="language-plaintext highlighter-rouge">let-see-what-I-can-do-the-day-before-the-submission</code> approach. Nevertheless, It was fun and I learned a lot. I hope that this post will be compelling for other participants of the competition and for the readers in general.</p> <blockquote> Disclaimer: I had close-to-zero knowledge of financial markets at the start, so please take my comments with a grain of salt. Actually, the team names says it all: AM naïve. </blockquote> <h1 id="forecasting">Forecasting</h1> <p>I had big hopes for the forecasting track but the first results were not promising. At first, I was experimenting with statistical models using <a href="https://unit8co.github.io/darts/" rel="external nofollow noopener" target="_blank">Darts</a> python library. The method was to find a <strong>local</strong> (one model - one target time series) or <strong>global</strong> (one model - multiple target time series) model that would provide the asset return forecast over 20 days horizon. Normally, the base mode was Lasso or Ridge model. Then I used the quantiles of the forecasting residuals to define the rank of the time series. This approach was very naive and way far from the top. Actually, one of the reasons was the wrong interpretation of the rules how ranking is done. For some reason, I thought that the ranking among the ETF and stock classes should be different.</p> <p>The first failures motivated me to go to the extreme. It was a time of <strong>Deep Learning</strong> and <strong>Transformer</strong> models. I modified the <strong>Temporal Fusion Transformer</strong> from <a href="https://pytorch-forecasting.readthedocs.io/en/stable/index.html" rel="external nofollow noopener" target="_blank">pytorch-forecasting</a> library to predict the quantiles the assets for the next 20 days. Although the results improved, the benchmark was not overcomed. Somewhere at this stage I switched to the investment part of the competition because I got some chances to win the quarterly prize. So, for some months I used the benchmark submission before I came back to the forecasting track with an idea of <strong>Multivariate Convolutional Neural Network</strong>, where instead of images at specific channels I used multivariate time series data of the assets. In contrast to the case with the transformer, the model would directly predict the quantiles of the assets in 20 days from now and possible reduce error accumulation. However, no luck with this model as well.</p> <p>In the end, it was a question of honor to beat the benchmark (the score of the benchmark is 0.16) before the end of the competition. To do so, I decided to use the superpower of all Kagglers – <strong>LightGBM</strong> model. The idea was to use the LightGBM model as a <strong>multi-class classification</strong> model to predict the asset ranking in 20 days. Interestingly, the #2 place of the competition also used the decision tree but with multi-label classification. Read why it was preferred over multi-class classification in <a href="https://miguelpmich.medium.com/finqboost-machine-learning-for-portfolio-forecasting-55e62b00ebca" rel="external nofollow noopener" target="_blank">Miguel Perez Michaus post</a>. To calibrate the probabilities of a given model, I’ve applied an isotonic recalibration combined with time series cross validation.</p> <p>Did it work? This solution actually made my dream come true and I was able to beat the benchmark. I finished 16th out of 223 in the forecasting track in Quarter 4 of the competition. However, I was curious if this model could actually let me win the whole competition conditioned that I was using it from the beginning. So I decided to backtest the model and see how it would perform.</p> <h2 id="backtesting-lightgbm">Backtesting LightGBM</h2> <p>The benchmarking was done with LightGBM without calibration as using the latter gave slightly worse performance results. The backtesting suggests that LightGBN would achieve 0.157623 in RPS. This score would allow me to finish in top 10 of the forecasting track. Below, you can see that the backtesting results per month and quarter. The divergence between the train and test results suggest that the model has overfitting issues that could have been dealt with. However, the model was not tuned and the main goal was to see if the model could be competitive.</p> <div class="l-body"> <iframe src="/assets/img/m6_competition/rps_monthly_backtest.html" frameborder="0" scrolling="no" height="400px" width="100%" style="border: 1px dashed grey;"></iframe> </div> <div class="l-body"> <iframe src="/assets/img/m6_competition/rps_quarterly_backtest.html" frameborder="0" scrolling="no" height="400px" width="100%" style="border: 1px dashed grey;"></iframe> </div> <h2 id="feature-importance">Feature importance</h2> <p>Another interesting thing for me was to look at the features that the model found useful. Overall, I used the following features:</p> <ul> <li>Custom trading strategy with several indexes (SMA, EMA, RSI, MACD, etc.)</li> <li>Features based on the transformation of stock prices, volumes</li> <li>Categorical features based on the ticker properties (sector, industry, etc.)</li> <li>One hot encodings of holidays</li> <li>Spline of day of the week</li> <li>Kernels for holidays</li> </ul> <p>Below, you can see the feature importance by split and gain. In both cases, the most important time series features were Simple Moving Average of trading Volume over 20 days, Cumulative Percentage Returns over 20 days, and Logarithmic Return over 20 days. The most important categorical features were asset class and asset type.</p> <div class="l-body"> <iframe src="/assets/img/m6_competition/lgbm_feature_importance_by_gain.html" frameborder="0" scrolling="no" height="400px" width="100%" style="border: 1px dashed grey;"></iframe> </div> <div class="l-body"> <iframe src="/assets/img/m6_competition/lgbm_feature_importance_by_split.html" frameborder="0" scrolling="no" height="400px" width="100%" style="border: 1px dashed grey;"></iframe> </div> <h1 id="investment">Investment</h1> <p>In the first quarter, simple method was used of minimizing risk with a given minimal level of returns. This method showed good results during the pilot submission but later providing mostly negative IR. At this stage, I have used the residuals of the forecasting model for the covariance matrix and mean values. Disappointed by the results, I came across <a href="https://riskfolio-lib.readthedocs.io/en/latest/index.html" rel="external nofollow noopener" target="_blank">Riskfolio-Lib</a>. The library is amazing but without a good understanding of the theory behind the methods, it is hard to use it. So, my solution to this dilemma was to use the library as a black box and try to find the optimization method that provides the best investment returns. The summary of the approach you can see below.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/m6_competition/M6_Portfolio-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/m6_competition/M6_Portfolio-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/m6_competition/M6_Portfolio-1400.webp"></source> <img src="/assets/img/m6_competition/M6_Portfolio.png" class="img-fluid rounded z-depth-1" width="700" height="300" title="Auto ML approach to investment optimization" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Auto ML approach to investment optimization </div> <p>The first attempt was a failure, strictly speaking. I finished second … from the bottom. On the day of the submission for the next month #4 I was doing some adjustments and missed the deadline by several minutes. That was an unpleasant experience. However, as they say <code class="language-plaintext highlighter-rouge">everything is all for the best</code>. Luckily, the rules of the competition are such that if you miss the submission, the results from the previous month are forwarded to the next. To my surprise, the solution that was the second from the bottom in month #3 became the first in month #4. At this moment, I felt that there is some chance to win something so I decided to push more effort into the investment part of the competition. I kept 11th in the month #5 but fell to #162 in the month #6 going below zero IR. In the next quarter, I started promising by finishing #17 in month #7 and #7 in month #8. However, month #9 was unlucky for me as I finished #162. Unfortunately, two good months and one extremely bad month dropped me at #24 place in Q3 quarter.</p> <p>For the last quarter, I have noticed that there is a seasonality in the 20 days returns as shown in the figure below. So, I have tried to use the estimated trend in the portfolio optimization by training the portfolio on the months with same dynamics as the current month. However, this approach did not work well for me as I finished #152 in Q4 with negative IR.</p> <div class="row justify-content-sm-center"> <div class="col-sm-12 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/m6_competition/tickers-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/m6_competition/tickers-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/m6_competition/tickers-1400.webp"></source> <img src="/assets/img/m6_competition/tickers.png" class="img-fluid rounded z-depth-1" width="800" height="400" title="M6 competition tickers" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> M6 competition tickers </div> <p>Looking back at the relative success (luck?) of the investment part for me, I think one of the reasons for good IR in Q2 and Q3 was the fact the ratio of short positions over long was prevailing in my portfolio. So these summer months were aligned with my strategy. The portfolios for the second quarter are shown below.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m4-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m4-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m4-1400.webp"></source> <img src="/assets/img/m6_competition/m6_competition_portfolio_m4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="M6 competition portfolio month 4" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m5-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m5-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m5-1400.webp"></source> <img src="/assets/img/m6_competition/m6_competition_portfolio_m5.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="M6 competition portfolio month 5" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m6-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m6-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/m6_competition/m6_competition_portfolio_m6-1400.webp"></source> <img src="/assets/img/m6_competition/m6_competition_portfolio_m6.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="M6 competition portfolio month 6" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> My portfolio in Q2 of M6 competition </div> <h1 id="conclusion">Conclusion</h1> <p>The competition was an amazing experience that kept me excited during the whole year. I thank the organizers for a wonderful competition and their efforts. One drawback for me is that despite more than 200 teams participated in the competition, the community was less active than I had expected or you could see on Kaggle. However, the good thing is that you can read the stories of the other participants here:</p> <ul> <li><a href="https://medium.com/geekculture/the-options-market-beat-94-of-participants-in-the-m6-financial-forecasting-contest-fa4f47f57d33" rel="external nofollow noopener" target="_blank">The Options Market Beat 97.6% of Participants in the M6 Financial Forecasting Contest</a></li> <li><a href="https://miguelpmich.medium.com/finqboost-machine-learning-for-portfolio-forecasting-55e62b00ebca" rel="external nofollow noopener" target="_blank">FinQBoost: Machine Learning for Portfolio Forecasting</a></li> <li><a href="https://m-e-gorelli.medium.com/how-i-won-6-000-in-the-m6-forecasting-competition-888df68bf132" rel="external nofollow noopener" target="_blank">How I won $6,000 in the M6 Forecasting Competition</a></li> </ul> <p>The code for this post and my solution is available on <a href="https://github.com/aleksei-mashlakov/m6_competition" rel="external nofollow noopener" target="_blank">github</a>:</p> <p><a href="https://lbesson.mit-license.org/" rel="external nofollow noopener" target="_blank"><img src="https://img.shields.io/badge/License-MIT-blue.svg?style=plastic" alt="Generic badge"></a> <a href="https://github.com/aleksei-mashlakov/m6_competition" rel="external nofollow noopener" target="_blank"><img src="https://img.shields.io/badge/acces_au_code-github-black.svg?style=plastic&amp;logo=github" alt="Generic badge"></a></p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography><div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"aleksei-mashlakov/aleksei-mashlakov.github.io","data-repo-id":"R_kgDOI4rIKQ","data-category":"Comments","data-category-id":"DIC_kwDOI4rIKc4CUNzD","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Aleksei Mashlakov. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>